<div class="container d-grid gp-3">
    <h5>A Etec de Portas Abertas (EPA) é um evento realizado anualmente pelas Escolas Técnicas Estaduais, no qual os alunos têm a oportunidade de apresentar ao público os projetos desenvolvidos ao longo dos cursos. 
        Durante o EPA, a comunidade pode conhecer de perto as diferentes áreas de formação oferecidas pela Etec, explorar trabalhos práticos, participar de atividades interativas e compreender como o conhecimento adquirido em sala de aula se transforma em inovação e soluções criativas.
        Mais do que uma mostra de projetos, o evento é um espaço de integração entre estudantes, professores e visitantes, incentivando a troca de experiências, a valorização da educação técnica e o despertar de novos interesses profissionais.
    </h5> 
    <div class="media  p-2">
        <iframe width="560" height="315" src="https://www.youtube.com/embed/1KJ0MaUt0Jc?si=ZhxkcT3n6Zb0xn2S" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <img src="\assets\image.png" class="img-thumbnail " style="height: 320px; width: auto;" alt="uni">
        <img src="\assets\image.png" class="img-thumbnail " style="height: 320px; width: auto;" alt="uni">
    </div>
    <div id="formChatbox" class="d-grid gp-2">
 <h1 class="mb-3">Chat com DeepSeek</h1>

   <div class="container mt-5">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="chat-tab" data-bs-toggle="tab" data-bs-target="#chat" type="button" role="tab">Chat</button>
        </li>
    </ul>
    <div class="tab-content p-4 bg-white border-bottom border-start border-end rounded-bottom">
        
        <!-- CHAT -->
        <div class="tab-pane fade show active" id="chat" role="tabpanel">
            <h3>Chat com o Vendedor</h3>
            <div id="mensagens" class="mb-3" style="height:200px; overflow-y:auto; border:1px solid #ccc; padding:10px; background:#f9f9f9;"></div>
            <form id="form-chat" class="d-flex gap-2">
                <input type="text" id="texto" name="texto" class="form-control" placeholder="Digite sua mensagem..." required>
                <button class="btn btn-primary" type="submit">Enviar</button>
            </form>
        </div>


       
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Atualizar mensagens
function atualizarMensagens() {
    fetch('/chatbot/etecia.js').then(r=>r.json()).then(ms=>{
        const div = document.getElementById('mensagens');
        div.innerHTML = ms.map(m=>`<div><b>${m.de}:</b> ${m.texto}</div>`).join('');
        div.scrollTop = div.scrollHeight;
    });
}
atualizarMensagens();

// Enviar mensagem
const formChat = document.getElementById('form-chat');
formChat.onsubmit = function(e) {
    e.preventDefault();
    fetch('/chatbot/etecia.js', {
        method: 'POST',
        body: new FormData(formChat)
    }).then(r=>r.json()).then(()=>{
        document.getElementById('texto').value = '';
        atualizarMensagens();
    });
};


// Salvar chave
const formChave = document.getElementById('sk-aef367ccef2643eaa3e403275e9e5a68');
formChave.onsubmit = function(e) {
    e.preventDefault();
    fetch('/chatbot/etecia.js', {
        method: 'POST',
        body: new FormData(formChave)
    }).then(r=>r.json()).then(data=>{
        document.getElementById('msg-chave').innerText = data.mensagem;
        setTimeout(()=>document.getElementById('msg-chave').innerText='', 2000);
    });
};
</script>
</div>